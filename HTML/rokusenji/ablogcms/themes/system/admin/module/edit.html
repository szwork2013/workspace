<header class="acms-grid-r">
	<div class="acms-col-6">
		<h1 class="acms-admin-title"><i class="acms-icon acms-icon-module"></i>モジュールID管理</h1>
	</div>
	<div class="acms-col-6">
		<!--#include file="/admin/topicpath.html"-->
	</div>
</header>

<!-- BEGIN_MODULE Admin_Module_Edit -->

<!-- BEGIN msg#insert -->
<p class="acms-alert acms-alert-info"><button class="js-acms-alert-close">×</button>モジュールIDを作成しました</p><!-- END msg#insert --><!-- BEGIN msg#update -->
<p class="acms-alert acms-alert-info"><button class="js-acms-alert-close">×</button>モジュールIDを保存しました</p><!-- END msg#update --><!-- BEGIN msg#delete -->
<p class="acms-alert acms-alert-danger"><button class="js-acms-alert-close">×</button>モジュールIDを削除しました</p><!-- END msg#delete --><!-- BEGIN msg#duplicate -->
<p class="acms-alert acms-alert-info"><button class="js-acms-alert-close">×</button>モジュールIDを複製しました</p><!-- END msg#duplicate -->

<!-- BEGIN headline#insert --><!-- END headline#insert -->
<!-- BEGIN headline#update --><!-- END headline#update -->

<div class="acms-float-right js-acms_fix_marker js-acms_fix_target acms-position-right">
<!-- BEGIN submit2#update -->
<!-- BEGIN moduleConfig:touch#on -->
<form action="" method="post" class="acms-inline-btn">
	<input type="hidden" name="mid" value="%{mid}" />
	<input type="submit" name="ACMS_POST_Module_2GET" value="表示設定" class="acms-btn-admin" />
</form><!-- END moduleConfig:touch#on -->

<form action="" method="post" class="adminBtn acms-inline-btn">
	<input type="hidden" name="edit" value="duplicate" />
	<input type="submit" name="ACMS_POST_Module_Duplicate" value="複製" class="acms-btn-admin" />
	<input type="hidden" name="takeover" value="{takeover}" />
</form>

<form action="" method="post" class="adminBtn acms-inline-btn">
	<input type="hidden" name="bid" value="%{BID}" />
	<input type="hidden" name="admin" value="config_import" />
	<input type="hidden" name="mid" value="%{mid}" />
	<input type="hidden" name="query[]" value="mid" />
	<input type="submit" name="ACMS_POST_2GET" value="インポート" class="acms-btn-admin" />
</form>

<form action="" method="post" class="adminBtn acms-inline-btn">
	<input type="hidden" name="bid" value="%{BID}" />
	<input type="hidden" name="admin" value="config_export" />
	<input type="hidden" name="mid" value="%{mid}" />
	<input type="hidden" name="query[]" value="mid" />
	<input type="submit" name="ACMS_POST_2GET" value="エクスポート" class="acms-btn-admin" />
</form>
<!-- END submit2#update -->

</div>

<form action="" method="post" class="acms-form">
	<div class="js-acms_fix_target">
		<a href="%{BLOG_URL}bid/%{BID}/admin/module_index/" class="acms-btn-admin">一覧</a>

		<input type="hidden" name="step" value="" />
		<!-- BEGIN submit#insert -->
		<input type="submit" name="ACMS_POST_Module_Insert" value="作成" class="acms-btn-admin acms-btn-admin-primary acms-btn-admin-save" />
		<!-- END submit#insert -->

		<!-- BEGIN submit#update -->
		<input type="submit" name="ACMS_POST_Module_Update" value="保存" class="acms-btn-admin acms-btn-admin-primary acms-btn-admin-save" />

		<input type="submit" name="ACMS_POST_Module_Delete" value="削除" onclick="return confirm('IDモジュールを削除します。\nよろしいですか？');" class="acms-btn-admin acms-btn-admin-danger" />
		<input type="hidden" name="takeover" value="{takeover}" />
		<!-- END submit#update -->

		<!-- BEGIN submit#duplicate -->
		<input type="submit" name="ACMS_POST_Module_Update" value="保存" class="acms-btn-admin acms-btn-admin-primary acms-btn-admin-save" />
		<!-- END submit#duplicate -->
	</div>

	<h3 class="acms-admin-title2">ID情報</h3>
	<table class="adminTable acms-table-admin-edit">
		<tr>
			<th>モジュール<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="IDを付与する対象のモジュールです。テンプレート側では、ここで指定したモジュールの記述にIDを付与します。"></i>
			</th>
			<td>
				<select name="name" id="js-arg_guidance_name">
				<!--#include file="/admin/module/select.html" -->
				</select>
				<input type="hidden" name="module[]" value="name" />
				<label for="validator-identifier-name" class="validator-result-{name:validator#required}">モジュールを選択してください。</label>
			</td>
		</tr>
		<tr>
			<th>id<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="モジュールに付与するID名です。これと同じ記述がテンプレート側にも必要になります。（半角英数字）"></i></th>
			<td>
				<input type="text" name="identifier" value="{identifier}"/>
				<input type="hidden" name="module[]" value="identifier" />
				<input type="hidden" name="name:validator#required" id="validator-name-required" />
				<!--<input type="hidden" name="identifier:validator#regexp" value="%{VALID_ID_REGEX}" id="validator-identifier-regexp" />-->
				<input type="hidden" name="identifier:validator#double" value="%{mid}" id="validator-identifier-double" />
				<!--<label for="validator-identifier-regexp" class="validator-result-{identifier:validator#regexp}">idに使用できない文字が含まれています。</label>-->
				<label for="validator-identifier-double" class="validator-result-{identifier:validator#double}">idが重複しています。</label>
			</td>
		</tr>
		<tr>
			<th>名前<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDを管理するための名前です。（日本語可）"></i></th>
			<td>
				<input type="text" name="label" value="{label}" size="50" />
				<input type="hidden" name="module[]" value="label" />
				<input type="hidden" name="label:validator#required" id="validator-label-required" />
				<label for="validator-label-required" class="validator-result-{label:validator#required}">名前を入力してください。</label>
			</td>
		</tr>
		<tr>
			<th>説明<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDがどのような動作をするかなどのメモです。"></i></th>
			<td>
				<textarea name="description" rows="5" style="width:100%;">{description}</textarea>
				<input type="hidden" name="module[]" value="description" />
			</td>
		</tr>
		<tr>
			<th>グローバル<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="チェックをすると、このモジュールIDが下の階層のブログでも使用できます。"></i></th>
			<td>
			<!-- BEGIN_MODULE Touch_BlogParent -->
			<input type="hidden" name="scope" value="local" />
			<label for="input-checkbox-scope" class="acms-form-checkbox">
				<input type="checkbox" name="scope" value="global"{scope:checked#global} id="input-checkbox-scope" /><i class="acms-ico-checkbox"></i>下の階層のブログが利用することを許可する
			</label>
			<input type="hidden" name="module[]" value="scope" />
			<!-- END_MODULE Touch_BlogParent -->
			<!-- BEGIN_MODULE Touch_NotBlogParent -->
			<input type="checkbox" disabled="disable"> 下の階層のブログが利用することを許可する ( 子ブログを持たないブログでは設定できません )
			<!-- END_MODULE Touch_NotBlogParent -->
			</td>
		</tr>
	</table>

	<script type="text/javascript">
		ACMS.Config.dpicConfig.constrainInput   = false;
	</script>
	<h3 class="acms-admin-title2">引数（チェックするとURLコンテキストが優先されます）</h3>
	<table class="adminTable acms-table-admin-edit" id="js-arg_reference">
		<tr id="js-arg_guidance_bid">
			<th>ブログID（bid）<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、ブログの管理ID（番号）で指定します。"></i></th>
			<td>&nbsp;</td>
			<td>
				<input type="text" name="bid" value="{bid}" />　( <a href="#" name="bid" class="js-arg_reference_trigger">ID参照</a> )
				<input type="hidden" name="module[]" value="bid" />
				<input type="hidden" name="bid:convert" value="a" />
				<label for="validator-bid-intOrGlobalVars" class="validator-result-{bid:validator#intOrGlobalVars}">数字またはグローバル変数を入力してください。</label>
			</td>
		</tr>
		<tr id="js-arg_guidance_uid">
			<th>
				<label for="input-checkbox-uid_scope">ユーザーID（uid）</label>
				<input type="hidden" name="uid_scope" value="local" />
			<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、ユーザーの管理ID（番号）で指定します。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="uid_scope" value="global"{uid_scope:checked#global} id="input-checkbox-uid_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="uid_scope" />
			</td>
			<td>
				<input type="text" name="uid" value="{uid}" />　( <a href="#" name="uid" class="js-arg_reference_trigger">ID参照</a> )
				<input type="hidden" name="module[]" value="uid" />
				<input type="hidden" name="uid:convert" value="a" />
				<label for="validator-uid-intOrGlobalVars" class="validator-result-{uid:validator#intOrGlobalVars}">数字またはグローバル変数を入力してください。</label>
			</td>
		</tr>
		<tr id="js-arg_guidance_cid">
			<th>
				<label for="input-checkbox-cid_scope">カテゴリーID（cid）</label>
				<input type="hidden" name="cid_scope" value="local" />
			<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、カテゴリーの管理ID（番号）で指定します。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="cid_scope" value="global"{cid_scope:checked#global} id="input-checkbox-cid_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="cid_scope" />
			</td>
			<td>
				<input type="text" name="cid" value="{cid}" />　( <a href="#" name="cid" class="js-arg_reference_trigger">ID参照</a> )
				<input type="hidden" name="module[]" value="cid" />
				<input type="hidden" name="cid:convert" value="a" />
				<label for="validator-cid-intOrGlobalVars" class="validator-result-{cid:validator#intOrGlobalVars}">数字またはグローバル変数を入力してください。</label>
			</td>
		</tr>
		<tr id="js-arg_guidance_eid">
			<th>
				<label for="input-checkbox-eid_scope">エントリーID（eid）</label>
				<input type="hidden" name="eid_scope" value="local" />
				<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、エントリーの管理ID（番号）で指定します。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="eid_scope" value="global"{eid_scope:checked#global} id="input-checkbox-eid_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="eid_scope" />
			</td>
			<td>
				<input type="text" name="eid" value="{eid}" /><!--　( <a href="#" name="eid" class="js-arg_reference_trigger">ID参照</a> )-->
				<input type="hidden" name="module[]" value="eid" />
				<input type="hidden" name="module[]" value="eid" />
				<input type="hidden" name="eid:convert" value="a" />
				<label for="validator-eid-intOrGlobalVars" class="validator-result-{eid:validator#intOrGlobalVars}">数字またはグローバル変数を入力してください。</label>
				<label for="validator-eid-exists" class="validator-result-{eid:validator#exists}">存在しないエントリーが指定されています。</label>
			</td>
		</tr>
		<tr id="js-arg_guidance_keyword">
			<th>
				<label for="input-checkbox-keyword_scope">キーワード（keyword）</label>
				<input type="hidden" name="keyword_scope" value="local" />
			<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、エントリーについてキーワードで指定します。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="keyword_scope" value="global"{keyword_scope:checked#global} id="input-checkbox-keyword_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="keyword_scope" />
			</td>
			<td>
				<input type="text" name="keyword" value="{keyword}" />
				<input type="hidden" name="module[]" value="keyword" />
			</td>
		</tr>
		<tr id="js-arg_guidance_tag">
			<th>
				<label for="input-checkbox-tag_scope">タグ（tag）</label> 
				<input type="hidden" name="tag_scope" value="local" />
				<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、エントリーについてタグで指定します。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="tag_scope" value="global"{tag_scope:checked#global} id="input-checkbox-tag_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="tag_scope" />
			</td>
			<td>
				<input type="text" name="tag" value="{tag}" />
				<input type="hidden" name="module[]" value="tag" />
			</td>
		</tr>
		<tr id="js-arg_guidance_field">
			<th>
				<label for="input-checkbox-field_scope">フィールド（field）</label>
				<input type="hidden" name="field_scope" value="local" />
			<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、カスタムフィールドで指定します。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="field_scope" value="global"{field_scope:checked#global} id="input-checkbox-field_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="field_scope" />
			</td>
			<td>
				<input type="text" name="field" value="{field}" />
				<input type="hidden" name="module[]" value="field" />
			</td>
		</tr>
		<tr id="js-arg_guidance_start">
			<th>
				<label for="input-checkbox-start_scope">開始日時（start）</label>
				<input type="hidden" name="start_scope" value="local" />
			<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="エントリーの日時に対して表示期間を指定します。ここで指定した日時以降のエントリーが表示されます。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="start_scope" value="global"{start_scope:checked#global} id="input-checkbox-start_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="start_scope" />
			</td>
			<td>
				日付: <input type="text" name="start_date" value="{start_date}" /><input type="hidden" name="module[]" value="start_date" />
				時刻: <input type="text" name="start_time" value="{start_time}" /><input type="hidden" name="module[]" value="start_time" />
			</td>
		</tr>
		<tr id="js-arg_guidance_end">
			<th>
				<label for="input-checkbox-end_scope">終了日時（end）</label>
				<input type="hidden" name="end_scope" value="local" />
			<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="エントリーの日時に対して表示期間を指定します。ここで指定した日時以前のエントリーが表示されます。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="end_scope" value="global"{end_scope:checked#global} id="input-checkbox-end_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="end_scope" />
			</td>
			<td>
				日付: <input type="text" name="end_date" value="{end_date}" /><input type="hidden" name="module[]" value="end_date" />
				時刻: <input type="text" name="end_time" value="{end_time}" /><input type="hidden" name="module[]" value="end_time" />
			</td>
		</tr>
		<tr id="js-arg_guidance_page">
			<th>
				<label for="input-checkbox-page_scope">ページ（page）</label>
				<input type="hidden" name="page_scope" value="local" />
			<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、ページ番号で指定します。ページャー（ページ送り）を使用する場合は、チェックをしてください。"></i></th>
			<td>
				<label class="acms-form-checkbox">
					<input type="checkbox" name="page_scope" value="global"{page_scope:checked#global} id="input-checkbox-page_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="page_scope" />
			</td>
			<td>
				<input type="text" name="page" value="{page}" size="6" />
				<input type="hidden" name="module[]" value="page" />
				<input type="hidden" name="page:convert" value="a" />
				<input type="hidden" name="page:validator#intOrGlobalVars" id="validator-page-intOrGlobalVars" />
				<label for="validator-page-intOrGlobalVars" class="validator-result-{page:validator#intOrGlobalVars}">数字またはグローバル変数を入力してください。</label>
			</td>
		</tr>
		<tr id="js-arg_guidance_order">
			<th>
				<label for="input-checkbox-order_scope">表示順（order）</label>
				<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="このモジュールIDの表示内容を、表示順で指定します。"></i>
			</th>
			<td>
				<input type="hidden" name="order_scope" value="local" />
				<label class="acms-form-checkbox">
					<input type="checkbox" name="order_scope" value="global"{order_scope:checked#global} id="input-checkbox-order_scope" /><i class="acms-ico-checkbox"></i>
				</label>
				<input type="hidden" name="module[]" value="order_scope" />
			</td>
			<td>
				<input type="text" name="order" value="{order}" />
				<input type="hidden" name="module[]" value="field" />
			</td>
		</tr>
	</table>

	<h3 class="acms-admin-title2">階層</h3>
	<table class="adminTable acms-table-admin-edit">
		<tr>
			<th>ブログ<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="下階層のブログを表示内容に含めるかの設定です。"></i></th>
			<td>
				<select name="bid_axis">
					<option value="self"{bid_axis:selected#self}>下階層のブログを含めない ( self )</option>
					<option value="descendant-or-self"{bid_axis:selected#descendant-or-self}>下階層のブログも含める ( descendant-or-self )</option>
					<option value="descendant"{bid_axis:selected#descendant}>下階層のブログのみを対象とする ( descendant )</option>
				</select>
				<input type="hidden" name="module[]" value="bid_axis" />
			</td>
		</tr>
		<tr>
			<th>カテゴリー<i class="acms-icon-tooltip js-acms-tooltip" data-acms-tooltip="下階層のカテゴリーを表示内容に含めるかの設定です。"></i></th>
			<td>
				<select name="cid_axis">
					<option value="self"{cid_axis:selected#self}>下階層のカテゴリーを含めない ( self )</option>
					<option value="descendant-or-self"{cid_axis:selected#descendant-or-self}>下階層のカテゴリーも含める ( descendant-or-self )</option>
					<option value="descendant"{cid_axis:selected#descendant}>下階層のカテゴリーのみを対象とする ( descendant )</option>
				</select>
				<input type="hidden" name="module[]" value="cid_axis" />
			</td>
		</tr>
	</table>
</form>
<div class="js-acms_fix_target acms_fix_bg"><div class="acms_fix_bg_index"></div></div>
<!-- END_MODULE Admin_Module_Edit -->